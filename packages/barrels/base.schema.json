{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://jojoxd.nl/schema/barrels/{version}/configuration-base",
  "title": "@jojoxd/barrels Base Schema",

  "type": "object",

  "allOf": [{
    "$ref": "#/$defs/generic-options"
  }, {
    "type": "object",

    "properties": {
      "barrels": {
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",

          "allOf": [{
            "$ref": "#/$defs/barrel-options"
          },{
            "$ref": "#/$defs/generic-options"
          }],

          "additionalProperties": true,
          "required": ["directory"]
        }
      },

      "cwd": {
        "type": "string"
      },

      "dryRun": {
        "type": "boolean"
      },

      "location": {
        "type": "string",
        "enum": ["top", "branch", "all"],
        "default": "top"
      },

      "target": {
        "type": "string",
        "enum": ["ts", "dts", "cjs", "esm"],
        "default": "mjs"
      }
    },

    "additionalProperties": true,
    "required": ["barrels"]
  }],

  "additionalProperties": true,

  "$defs": {
    "match": {
      "type": "string"
    },

    "match-array": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/match"
      }
    },

    "barrel-options": {
      "type": "object",

      "properties": {
        "directory": {
          "$ref": "#/$defs/match"
        }
      },

      "required": ["directory"]
    },

    "generic-options": {
      "type": "object",

      "properties": {
        "include": {
          "$ref": "#/$defs/match-array"
        },

        "exclude": {
          "$ref": "#/$defs/match-array"
        },

        "extensions": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^\\..+$"
          }
        },

        "emitExtensions": {
          "type": "boolean",
          "default": false
        },

        "emitAssertions": {
          "type": "boolean",
          "default": true
        },

        "header": {
          "type": "string",
          "default": "@generated by @jojoxd/barrels"
        }
      },

      "additionalProperties": true
    }
  }
}